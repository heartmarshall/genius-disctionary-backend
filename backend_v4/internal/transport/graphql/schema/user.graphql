# ============================================================
#  OUTPUT TYPES — User
# ============================================================

type User {
  id: UUID!
  email: String!
  username: String!
  name: String
  avatarUrl: String
  role: String!
  createdAt: DateTime!
  """Field resolver — загружает настройки пользователя."""
  settings: UserSettings!
}

type UserSettings {
  newCardsPerDay: Int!
  reviewsPerDay: Int!
  maxIntervalDays: Int!
  desiredRetention: Float!
  timezone: String!
}

# ============================================================
#  INPUT TYPES — User
# ============================================================

input UpdateSettingsInput {
  newCardsPerDay: Int
  reviewsPerDay: Int
  maxIntervalDays: Int
  desiredRetention: Float
  timezone: String
}

input UpdateProfileInput {
  name: String!
  avatarUrl: String
}

# ============================================================
#  PAYLOAD TYPES — User
# ============================================================

type UpdateSettingsPayload {
  settings: UserSettings!
}

type UpdateProfilePayload {
  user: User!
}

# ============================================================
#  QUERIES — User
# ============================================================

extend type Query {
  """Текущий пользователь (требует авторизации)."""
  me: User!
}

# ============================================================
#  MUTATIONS — User
# ============================================================

extend type Mutation {
  updateSettings(input: UpdateSettingsInput!): UpdateSettingsPayload!
  updateProfile(input: UpdateProfileInput!): UpdateProfilePayload!
}
